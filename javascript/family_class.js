function Family(id){this.id=parseInt(id);this.is_ready=false;var that=this;this.ready_function=null;this.trigger_ready=function(){this.is_ready=true;if(this.ready_function)this.ready_function(this)};this.ready=function(ready_function){this.ready_function=ready_function;if(this.is_ready)this.trigger_ready()};this.createPersonPlaceHolder=function(id){return{id:parseInt(id),fetch:function(){return new Person(id)}}};requestXML("family",this.id,function(xml){that.xml=xml;that.note=xml.find("family > note").text();that.sources=parseSources(xml.find("family > sources"));var father=xml.find("family father").text();if(father)that.father=that.createPersonPlaceHolder(father);var mother=xml.find("family mother").text();if(mother)that.mother=that.createPersonPlaceHolder(mother);that.children=[];xml.find("family child").each(function(index,child){that.children.push(that.createPersonPlaceHolder($(child).attr("id")))});that.trigger_ready()})}